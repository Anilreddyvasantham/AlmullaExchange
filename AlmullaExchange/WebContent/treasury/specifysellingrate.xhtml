<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" type="text/css" href="../css/dataTable.css" />
	
</h:head>

      <p:confirmDialog id="confirm" widgetVar="confirm" width="400" height="20"  
		resizable="false" style="background-color: white !important;" header="#{msg['lbl.warningDailog']}" styleClass="warning"
		showEffect="clip" hideEffect="clip" closeOnEscape="true" closable="true" message="#{msg['lbl.enterSellRateGrtByRate']}">
	</p:confirmDialog>
    
    <p:confirmDialog id="succ" widgetVar="succ" width="400" height="20"  
		resizable="false" style="background-color: white !important;" header="#{msg['lbl.warningDailog']}" styleClass="warning"
		showEffect="clip" hideEffect="clip" closeOnEscape="true" closable="true" message="#{msg['lbl.enterAtleastOneSell']}">
	</p:confirmDialog>
<h:body>

<p:dialog id="saved" widgetVar="saved" width="400" height="70"  resizable="false" 
	style="background-color: white !important;" styleClass="success" header="#{msg['lbl.success']}" closable="false"
	showEffect="clip" hideEffect="clip" >
           <p:outputLabel value="#{msg['lbl.dataissuccessfullysaved']}" style="text-align: center; font-size:16px !important;"/><br/>
           <p:commandButton value="#{msg['lbl.ok']}" actionListener="#{specifySellingRateBean.clickOnOK}" process="@this" style="margin-left: 150px !important;"/>       
     </p:dialog>
	<f:view>
		<ui:include src="#{facesBean.header}"></ui:include>
		<ui:include src="#{facesBean.menu}"></ui:include>
		
		<!--  <f:event listener="#{specifySellingRateBean.fetchRecord}" type="preRenderView"/>  -->
		 
		<h:form id="form">
		<table align="left" width="100%" style="height: 100%;">
			<tr>
				<td align="left" valign="top" style="height: 100%;">
				<!-- <ui:include
						src="../common/fxdeal_menu.xhtml"></ui:include> -->
						<ui:include src="#{facesBean.fxdeal_menu}"></ui:include>
						</td>

				<td class="rightColumn" valign="top"><h:panelGroup
						layout="block" class="container">
						<h:panelGroup layout="block" class="main_div">
							<div class="menu_button">
								<img style="cursor: pointer; position: relative; left: 15px;"
									id="HideHandle" name="HideHandle"
									src="../images/toggle_plus.png" alt=""
									onclick='hideLeftCol("leftCol");closeMenus();' />
							</div>
							<h1>
								<h:outputText value="#{msg['lbl.specifysellingrateforspecialcustomerdeals']}" />
							</h1>


							<p:panel styleClass="shadow" id="mainPanel" >
							
							<h2>
									<h:outputText value="#{msg['lbl.specifysellingrateforspecialcustomerdeals']}" />
								</h2>
								
								
								<p:confirmDialog id="csp" widgetVar="csp" visible="#{specifySellingRateBean.dialogDisplay}"  showHeader="false" resizable="false" header="Warning Message" styleClass="warning"
														style=" border:2px solid #F33535 !important; padding:0px !important;  color:red; font-weight:bold; background:url('../images/warning-icon.png') 5px 15px no-repeat #FFF !important;" showEffect="explode" hideEffect="explode" message="#{specifySellingRateBean.errorMsg}">
	  						    </p:confirmDialog>
							
						        <p:confirmDialog id="nullPoiterId"
                                                                     widgetVar="nullPoiterId" resizable="false"
                                                                     style="background-color: white !important;"
                                                                     header="#{msg['lbl.warningDailog']}" styleClass="warning"
                                                                     showEffect="clip" hideEffect="clip" closeOnEscape="true"
                                                                     closable="true"
                                                                     message="#{specifySellingRateBean.errorMsg} - #{msg['lbl.nullPonterExcepetion']}">
						        </p:confirmDialog>
								
								
								<p:panel styleClass="panel_border" >
								
								<p:dataTable value="#{specifySellingRateBean.specifySellingRateList}" styleClass="mydatatableclass" rows="10"
								 id="specifyrate"  var="c" editMode="cell" editable="true" rowIndexVar="rowIndex" emptyMessage="#{msg['lbl.norecordfound']}" paginator="true" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  rowsPerPageTemplate="15,10,5" paginatorPosition="bottom">								
									
								<p:column headerText="#{msg['lbl.sino']}" style="width:40px;">
								<h:outputText value="#{rowIndex+1}"/>
								</p:column>
									
									
									<p:column headerText="#{msg['lbl.projectionDate']}" sortBy="#{c.projectiondate}">
										<h:outputText value="#{c.projectiondate}" />
									</p:column>
									
									<p:column headerText="#{msg['lbl.documentNo']}" sortBy="#{c.documentNo}" style="width:5%;">
										<h:outputText value="#{c.documentNo}" />
									</p:column>
									
									<p:column headerText="#{msg['lbl.valueUpto']}" sortBy="#{c.valuedate}">
										<h:outputText value="#{c.valuedate}" />
									</p:column>
									
									<p:column headerText="#{msg['lbl.customer']}" sortBy="#{c.customer}">
										<h:outputText value="#{c.customer}" />
									</p:column>
									
									<p:column headerText="#{msg['lbl.bank']}" sortBy="#{c.bank}" style="width:13%;">
										<h:outputText value="#{c.bank}" />
									</p:column>
									
									<p:column headerText="#{msg['lbl.currency']}" sortBy="#{c.currency}">
										<h:outputText value="#{c.currency}" />
									</p:column>
									
									<p:column headerText="#{msg['lbl.fcamount']}" sortBy="#{c.fcAmount}">
										<h:outputText value="#{c.fcAmount}" />
									</p:column>
									
									<p:column headerText="#{msg['lbl.fundingoption']}" style="width:15%;">
										<p:selectOneMenu value="#{c.fundingOption}" disabled="#{c.disablefundingOption}">
										<f:selectItem itemLabel="#{msg['lbl.fundOption']}" itemValue=""  />
														<f:selectItem itemLabel="#{msg['lbl.commonPool']}" itemValue="C" />
														<f:selectItem itemLabel="#{msg['lbl.specialPool']}" itemValue="S" />
									 <p:ajax event="change" listener="#{specifySellingRateBean.makeEditable(c)}" update="sellPanel" process="@this" onstart="process.show();" onsuccess="process.hide();"/>  
									<!-- 	<p:ajax event="change" listener="#{specifySellingRateBean.onCellEdit(c)}" update=":form:mainPanel"/> -->
											
										</p:selectOneMenu>
									</p:column>


										<p:column headerText="#{msg['lbl.sellrate']}" id="sellPanel" sortBy="#{c.sellRate}" style="width:8%;" >
											<p:watermark value="#{msg['lbl.enterSellRate']}" for="sellid" rendered="#{c.dispWaterMark}" />
											<p:message id="selRatemsg" for="sellid" display="text" />
											<p:inputText id="sellid" value="#{c.sellRate}" readonly="#{c.readOnlySellRate}">
												<p:ajax event="blur" listener="#{specifySellingRateBean.calculateAvarage(c)}" update="avgrate,selRatemsg,specifyrate" onstart="process.show();" onsuccess="process.hide();"/>
												<f:validator validatorId="com.amg.exchange.validator.doubleCheckValidator" />
											</p:inputText>
										</p:column>
										<p:column headerText="#{msg['lbl.buyrate']}" sortBy="#{c.buyrate}" style="width:8%;">
									 	  <p:inputText value="#{c.buyRate}" readonly="true" /> 
									    </p:column>

										<p:column headerText="#{msg['lbl.averagerate']}" sortBy="#{c.avarageRate}" style="width:8%;">
								     		<h:outputText value="#{c.avarageRate}" id="avgrate" />
									    </p:column>

								</p:dataTable>
						
								
						<p:spacer height="20px"/>
								
								<h:panelGroup layout="block" styleClass="shadow_button">
								<p:commandButton value="#{msg['lbl.save']}"  style="margin-right:10px;" action="#{specifySellingRateBean.save}" process="@this"  imstyle="margin-right:10px;" onstart="process.show();" onsuccess="process.hide();">
								</p:commandButton>
								<p:commandButton value="#{msg['lbl.exit']}" action="#{specifySellingRateBean.exit}" process="@this">
								</p:commandButton>
								<div class="clearfix"></div>
							</h:panelGroup>
							<div class="clearfix"></div>
								</p:panel>

									<div class="clearfix"></div>
									<p:dialog modal="true" showHeader="true" header="Please wait.."  widgetVar="process"  id="process"   width="300" height="50" resizable="false"
								        draggable="false" closable="false" style=" font-weight:bold; font-size: 17px !important;text-align:center;background-color: #FFF !important;;">  
								        <div style="text-align:center;">
								        <p:graphicImage value="../images/preloader.gif" />
								        </div>
							    	</p:dialog>
								</p:panel>
							<div class="clearfix"></div>
							

						</h:panelGroup>
						<h:panelGroup layout="block" class="clearfix"></h:panelGroup>
					</h:panelGroup></td>
			</tr>
		</table></h:form>
		<div class="clearfix"></div>
		<ui:include src="#{facesBean.footerwithoutRuleEngine}"></ui:include>
	</f:view>
</h:body>
</html>