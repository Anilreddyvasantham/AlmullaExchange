<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
</h:head>
<h:body dir="#{facesBean.direction}">
	<f:view locale="#{facesBean.locale}">
		<ui:include src="#{facesBean.header}"></ui:include>
<ui:include src="#{facesBean.menu}"></ui:include>
<table align="left" width="100%" style="height:100%;">
    <tr>
    <td align="left" valign="top" style="height:100%;" ><ui:include src="../common/success_menu.xhtml"></ui:include></td>
    <td  class="rightColumn" valign="top">
		<h:panelGroup layout="block" class="container">
			<h:panelGroup layout="block" class="main_div">
<div class="menu_button"><img style="cursor: pointer;  position:relative; left:15px;" id="HideHandle" name="HideHandle" src="../images/toggle_plus.png" alt="" onclick='hideLeftCol("leftCol");closeMenus();'/></div>
				<h1><h:outputLabel value="#{msg['lbl.changepassword']}"></h:outputLabel>  </h1>
				
							<h:form id="changePasswordForm">
							<p:panel id="mainPanel"
										style="border: 0px; padding:0px!important;">
										
										<p:dialog id="changepasswordsuccess" widgetVar="changepasswordsuccess"
										width="400" height="140" showHeader="true" resizable="false"
										style=" border:2px solid #F33535 !important; padding:0px !important;  color:green !important; font-weight:bold; background:url('../images/warning-icon.png') 5px 15px no-repeat #FFF !important;"
										showEffect="clip" hideEffect="clip" closeOnEscape="true"
										closable="true" modal="true">
											<p:outputLabel value="#{msg['lbl.changepasswordsuccess']}" />
										 <p:commandButton  action="#{changepassword.changePasswordSuccess}" value="#{msg['lbl.ok']}" oncomplete="showimage.hide()" ajax="false" immediate="true"/>
										<br />
									</p:dialog>
										
										
										
							<h:panelGroup layout="block" styleClass="shadow" style="margin:10px !important;">
								
							
								<p:panel id="panel-changepassword">
									
									<div class="ui-grid-b ui-responsive">
									<div class="ui-block-a"></div>
									<div class="ui-block-b">
									<p:message for="oldpassword" display="text"/>
									 <h:outputLabel  id="lbl_oldpassword"  />
									<p:panel styleClass="inner_left_col">
										<h:outputText value="#{msg['lbl.oldpassword']} *" />
									</p:panel>
																	
											<p:panel styleClass="inner_right_col"
										>
												<p:password id="oldpassword" required="true"
													label="Password" 
													value="#{changepassword.oldPassword}">
												</p:password>
												<p:watermark for="oldpassword" value="Password *" />
												</p:panel>
											
												</div>
									<div class="ui-block-c"></div>
									</div>
									<div class="clearfix"></div>
									
									
									<div class="ui-grid-b ui-responsive">
									<div class="ui-block-a"></div>
									<div class="ui-block-b">
									<p:message for="newpassword" display="text" />
									<p:outputLabel id="lbl_newpassword" />
									<p:panel styleClass="inner_left_col">
										<h:outputText value="#{msg['lbl.newpassword']} *" />
									</p:panel>
											<p:panel styleClass="inner_right_col">
												<p:password id="newpassword" required="true"
													label="Password" feedback="true" match="retypepassword"
													value="#{changepassword.newPassword}" maxlength="20"
													validator="RegularExpressionValidation"
													>
													<f:attribute name="regexValue" value="^[0-9a-zA-Z~!@#$%^*_+\\s .]*$" />
													<f:attribute name="minValue" value="6" />
													<f:attribute name="maxValue" value="20" />
													<p:watermark for="newpassword" value="New Password *" />
												</p:password>
												</p:panel>
											
												</div>
									<div class="ui-block-c"></div>
									</div>
									<div class="clearfix"></div>
									
									
									<div class="ui-grid-b ui-responsive">
									<div class="ui-block-a"></div>
									<div class="ui-block-b">
									<p:message for="retypepassword" display="text" />
									<p:outputLabel style="white-space:nowrap;" id="lbl_retypepassword" />
									
									<p:panel styleClass="inner_left_col">
										<h:outputText value="#{msg['lbl.retypepassword']} *" />
									</p:panel>
											<p:panel styleClass="inner_right_col">
												<p:password id="retypepassword" required="true"
													requiredMessage="#{msg['lbl.conformpassword']}"
													label="Password" feedback="true"
													value="#{changepassword.retypePassword}" maxlength="20">
												</p:password>
												<p:watermark for="retypepassword" value="Retype New Password *" />
												</p:panel>
											
												</div>
									<div class="ui-block-c"></div>
									</div>
									<div class="clearfix"></div>
												
												</p:panel>
												</h:panelGroup>
												<h:panelGroup styleClass="shadow_button">
											
												<p:commandButton value="#{msg['lbl.clear']}" style="margin-left:10px;" type="reset" ajax="false"/>
												<p:spacer/><p:spacer/><p:spacer/>
												<p:commandButton value="#{msg['lbl.submit']}" update="retypepassword" action="#{changepassword.updatePassword}" />
											
								</h:panelGroup>
								</p:panel>

							</h:form>
					
			</h:panelGroup>
		</h:panelGroup>
		</td>
		</tr>
		</table>
		<ui:include src="#{facesBean.footer}"></ui:include>
	</f:view>
</h:body>


</html>